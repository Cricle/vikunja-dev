import{d as J,u as K,e as B,c as _,g as c,t as r,h as m,a as t,w as l,i as k,k as O,r as s,F as M,l as P,j as f,b as x,f as v}from"./index-BWLevX4m.js";import{u as Q}from"./configStore-B2mf_68t.js";import{u as R,P as W}from"./eventStore-CyV9OD7O.js";var y=(d=>(d.Text="Text",d.Markdown="Markdown",d.Html="Html",d))(y||{});const X={class:"pa-4"},Y={class:"va-h1 mb-6"},Z={class:"row"},ee={class:"flex xs12 md3 mb-4"},te={class:"va-h5 mb-3"},le={class:"flex xs12 md6 mb-4"},ae={key:0,style:{width:"100%"}},oe={class:"va-h3 mb-4"},ne={class:"flex xs12 md3"},se={key:0},ce={class:"va-h5 mb-3"},me=J({__name:"TemplateEditor",setup(d){const{t:i}=K(),p=Q(),b=R(),S=x(()=>b.allEvents),$=x(()=>p.templates),a=B(null),u=B({eventType:"",title:"",body:"",format:y.Text}),N=x(()=>{if(!a.value)return[];const o=b.getEventMetadata(a.value);return W[o.category]||[]});function T(o){return b.getEventMetadata(o).label}function g(o){a.value=o;const n=$.value[o];n?u.value={...n}:u.value={eventType:o,title:"{{event.type}}",body:"Event occurred at {{event.timestamp}}",format:y.Text}}function U(){a.value&&(p.setTemplate(a.value,{...u.value}),p.saveConfig())}function j(){a.value&&(p.removeTemplate(a.value),g(a.value))}function H(o){const n=`{{${o}}}`;navigator.clipboard.writeText(n)}function L(o){return`{{${o}}}`}return(o,n)=>{const E=s("va-list-item-label"),h=s("va-list-item-section"),V=s("va-list-item"),C=s("va-list"),z=s("va-input"),A=s("va-textarea"),D=s("va-select"),w=s("va-button"),F=s("va-button-group"),I=s("va-alert"),q=s("va-icon");return v(),_("div",X,[c("h1",Y,r(m(i)("templates.title")),1),c("div",Z,[c("div",ee,[c("div",null,[c("h3",te,r(m(i)("templates.eventType")),1),t(C,null,{default:l(()=>[(v(!0),_(M,null,P(S.value,e=>(v(),k(V,{key:e,active:a.value===e,onClick:G=>g(e),clickable:""},{default:l(()=>[t(h,null,{default:l(()=>[t(E,null,{default:l(()=>[f(r(T(e)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1})])]),c("div",le,[a.value?(v(),_("div",ae,[c("h2",oe,r(T(a.value)),1),t(z,{modelValue:u.value.title,"onUpdate:modelValue":n[0]||(n[0]=e=>u.value.title=e),label:m(i)("templates.titleTemplate"),placeholder:"e.g., New Task: {{task.title}}",class:"mb-4"},null,8,["modelValue","label"]),t(A,{modelValue:u.value.body,"onUpdate:modelValue":n[1]||(n[1]=e=>u.value.body=e),label:m(i)("templates.bodyTemplate"),placeholder:"e.g., A new task has been created in {{project.title}}","min-rows":5,class:"mb-4"},null,8,["modelValue","label"]),t(D,{modelValue:u.value.format,"onUpdate:modelValue":n[2]||(n[2]=e=>u.value.format=e),label:"Format",options:["Text","Markdown"],class:"mb-4"},null,8,["modelValue"]),t(F,null,{default:l(()=>[t(w,{onClick:U,color:"primary",icon:"save"},{default:l(()=>[f(r(m(i)("common.save")),1)]),_:1}),t(w,{onClick:j,icon:"refresh"},{default:l(()=>[f(r(m(i)("templates.reset")),1)]),_:1})]),_:1})])):(v(),k(I,{key:1,color:"info",border:"top"},{default:l(()=>[f(r(m(i)("templates.selectEvent")),1)]),_:1}))]),c("div",ne,[a.value?(v(),_("div",se,[c("h3",ce,r(m(i)("templates.placeholders")),1),t(C,null,{default:l(()=>[(v(!0),_(M,null,P(N.value,e=>(v(),k(V,{key:e,onClick:G=>H(e),clickable:""},{default:l(()=>[t(h,null,{default:l(()=>[t(E,null,{default:l(()=>[c("code",null,r(L(e)),1)]),_:2},1024)]),_:2},1024),t(h,{icon:""},{default:l(()=>[t(q,{name:"content_copy",size:"small"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):O("",!0)])])])}}});export{me as default};
